{% comment %}
  This is the section for 'Uncle Rustys Questionnaire'.
{% endcomment %}

<!-- Uncle Rustys Questionnaire Section -->
<script src='{{ 'questionaire.js' | asset_url }}' defer></script>
<script src='{{ 'fuse.js' | asset_url }}' defer></script>
<section id='uncle-rustys-questionnaire'>
  {% assign numberOfBlocks = section.blocks.size %}

  <script>
    window.ur_questionaire_slide_count = {{ numberOfBlocks }};
  </script>

  <div class='xabsolute xw-full page-width xflex xmx-auto' style='left: 50%; transform: translateX(-50%);'>
    <div class='accordion content-container color-background-2 gradient xflex-1 xmt-8'>
      <details id='info'>
        <summary
          id='info_sum'
          role='button'
          aria-expanded='false'
          aria-controls='info_content'
          class='xflex'
        >
          <h3 class='accordion__title inline-richtext h4 xfont-bold'>Ernährungsberatung</h3>
          <svg
            class='icon icon-caret'
            width='24'
            height='24'
            viewBox='0 0 24 24'
            fill='none'
            xmlns='http://www.w3.org/2000/svg'
          >
            <path d="M16.293 8.05029L12 12.3433L7.70697 8.05029L6.29297 9.46429L12 15.1713L17.707 9.46429L16.293 8.05029Z" fill="currentColor"></path>
          </svg>
        </summary>
        <div
          class='accordion__content rte'
          id='info_content'
          role='region'
          aria-labelledby='info_sum'
        >
          <p class=' xpx-8 xpb-8'>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum
            tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero vitae
            erat. Suspendisse varius enim in eros elementum tristique. Duis cursus, mi quis viverra ornare, eros dolor
            interdum nulla.
          </p>
        </div>
      </details>
      <progress
        id='questionaire-progress'
        class='xpx-8 xmb-4'
        value='0'
        max='100'
        style='--value: 1; --max: 100;'
      ></progress>
    </div>
    {% comment %}
      <div class=' xrounded-3xl xbg-lightbeige xmt-8 xp-8 xflex-1'>
        <h1 class=' xtext-4xl'>Ernährungsberatung</h1>
        <p class='xmt-8'>
          Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et
          dolore magna aliquyam erat.
        </p>
      </div>
    {% endcomment %}
  </div>
  <div class='page-width xflex xflex-col'>
    <div id='slide-wrap' class='wrap  xmin-h-[50vh] xmax-h-[50vh] xoverflow-y-clip'>
      {% for block in section.blocks %}
        <div
          data-slide='{{ forloop.index }}'
          data-active='{% if forloop.first %}true{% else %}false{% endif %}'
          data-type='{{ block.type }}'
          class='questionaire-slide xflex-1 xflex xflex-col xjustify-center xgap-16 xmin-h-[50vh] xtransition-all xduration-700 {% unless forloop.first %}xhidden{% endunless %}'
          {{ block.shopify_attributes }}
        >
          {% case block.type %}
            {% when 'name-question' %}
              <div class='name-question'>
                <form class='xflex xflex-col xgap-16'>
                  <label
                    for='{{ block.id }}-text'
                    class='xfont-semibold xtext-6xl'
                    style="font-family: 'Rooney';"
                  >
                    {{- block.settings.question_text -}}
                  </label>
                  <div>
                    <input
                      type='text'
                      required
                      id='{{ block.id }}-text'
                      placeholder='{{ block.settings.placeholder_text }}'
                      class='!xbg-beige-200 xpy-4 xpx-0 xborder-b-2 xtext-beige-950 xborder-beige-950 xtext-4xl xfont-semibold xplaceholder-beige-400 [&:has(:focus-visible)]:xoutline-none'
                    >
                  </div>
                </form>
              </div>
            {% when 'age-question' %}
              <div class='age-question'>
                <form class='xflex xflex-col xgap-16'>
                  <div>
                    <label
                      for='{{ block.id }}-text'
                      class='xfont-semibold xtext-6xl'
                      style="font-family: 'Rooney';"
                    >
                      {{- block.settings.question_text -}}
                    </label>
                    <p class='xmt-8'>{{ block.settings.question_descr }}</p>
                  </div>
                  <div>
                    <input
                      type='month'
                      required
                      id='{{ block.id }}-text'
                      placeholder='2016-02'
                      class='!xbg-beige-200 xpy-4 xpx-0 xborder-b-2 xtext-beige-950 xborder-beige-950 xtext-4xl xfont-semibold xplaceholder-beige-400 [&:has(:focus-visible)]:xoutline-none'
                    >
                  </div>
                </form>
              </div>
            {% when 'breed-question' %}
              <div class='breed-question'>
                <form class='xflex xflex-col xgap-16'>
                  <div>
                    <label
                      for='{{ block.id }}-text'
                      class='xfont-semibold xtext-6xl'
                      style="font-family: 'Rooney';"
                    >
                      {{- block.settings.question_text -}}
                    </label>
                    <p class='xmt-8'>{{ block.settings.question_descr }}</p>
                  </div>
                  <div class='ur-suggestion'>
                    <input
                      name='ur-breed'
                      autocomplete='off'
                      type='text'
                      id='{{ block.id }}-text'
                      placeholder='{{ block.settings.placeholder_text }}'
                      class='ur-breed-input !xbg-beige-200 xpy-4 xpx-0 xborder-b-2 xtext-beige-950 xborder-beige-950 xtext-4xl xfont-semibold xplaceholder-beige-400 [&:has(:focus-visible)]:xoutline-none'
                    >
                    <div class='ur-dropdown xhidden xmt-4 xbg-white xshadow-lg xrounded-3xl xp-4 xflex xflex-col xgap-2 xmax-h-96 xoverflow-scroll'>
                      <div class='item'>No Suggestion</div>
                    </div>
                  </div>
                  <div>
                    <input
                      type='checkbox'
                      id='notshure'
                      name='dontknow'
                    >
                    <label for='notshure' class='' style="font-family: 'Rooney';">Ich bin mir nicht sicher...</label>
                  </div>
                </form>
              </div>
            {% when 'weight-question' %}
              <div class='weight-question'>
                <form class='xflex xflex-col xgap-16'>
                  <div>
                    <label
                      for='{{ block.id }}-text'
                      class='xfont-semibold xtext-6xl'
                      style="font-family: 'Rooney';"
                    >
                      {{- block.settings.question_text -}}
                    </label>
                    <p class='xmt-8'>{{ block.settings.question_descr }}</p>
                  </div>
                  <div>
                    <input
                      type='number'
                      required
                      id='{{ block.id }}-text'
                      placeholder='{{ block.settings.placeholder_text }}'
                      class='ur-weight-input xw-40 !xbg-beige-200 xpy-4 xpx-0 xborder-b-2 xtext-beige-950 xborder-beige-950 xtext-4xl xfont-semibold xplaceholder-beige-400 [&:has(:focus-visible)]:xoutline-none'
                    >
                    <span class='xrelative -xleft-9 xtext-beige-400 xtext-4xl xfont-semibold' style='left: -60px'
                      >kg</span
                    >
                  </div>
                </form>
              </div>
            {% when 'allergies-question' %}
              <div class='allergies-question'>
                <form class='xflex xflex-col xgap-16'>
                  <div>
                    <label
                      class='xfont-semibold xtext-6xl'
                      style="font-family: 'Rooney';"
                    >
                      {{- block.settings.question_text -}}
                    </label>
                    <p class='xmt-8'>{{ block.settings.question_descr }}</p>
                  </div>
                  <div class='!xtext-xl xgrid xgrid-cols-2 xgap-4 xmax-w-3xl' style="font-family: 'Rooney' !important;">
                    <div>
                      <input type='checkbox' id='fish' name='fish'>
                      <label class='!xtext-3xl' for='fish'>Fisch</label>
                    </div>

                    <div>
                      <input type='checkbox' id='getreide' name='getreide'>
                      <label class='!xtext-3xl' for='getreide'>Getreide</label>
                    </div>

                    <div>
                      <input type='checkbox' id='kartoffeln' name='kartoffeln'>
                      <label class='!xtext-3xl' for='kartoffeln'>Kartoffeln</label>
                    </div>

                    <div>
                      <input type='checkbox' id='rind' name='rind'>
                      <label class='!xtext-3xl' for='rind'>Rind</label>
                    </div>

                    <div>
                      <input type='checkbox' id='milchprodukte' name='milchprodukte'>
                      <label class='!xtext-3xl' for='milchprodukte'>Milchprodukte</label>
                    </div>

                    <div>
                      <input type='checkbox' id='pferd' name='pferd'>
                      <label class='!xtext-3xl' for='pferd'>Pferd</label>
                    </div>
                  </div>
                </form>
              </div>
          {% endcase %}
        </div>
      {% endfor %}
    </div>
    <div class='xw-full xflex xjustify-between'>
      <div class='btn-container'><button class='button qur-prev !xhidden'>Zurück</button></div>
      <div class='btn-container'><button class='button qur-next'>Weiter</button></div>
    </div>
  </div>
</section>

{% if request.design_mode %}
  <script>
    document.addEventListener('shopify:block:select', function (event) {
      const blockSelectedIsSlide = event.target.classList.contains('questionaire-slide');
      if (!blockSelectedIsSlide) return;

      const slides = document.querySelectorAll('.questionaire-slide');
      const slideArray = [...slides];

      slideArray.map(function (slide) {
        slide.setAttribute('data-active', 'false');
        slide.classList.add('xhidden');
      });

      event.target.setAttribute('data-active', 'true');
      event.target.classList.remove('xhidden');
    });
  </script>
{% endif %}

{% schema %}
{
  "name": "UR Questionnaire",
  "blocks": [
    {
      "type": "name-question",
      "name": "Name Question",
      "settings": [
        {
          "type": "text",
          "label": "Question Text",
          "id": "question_text",
          "default": "Wie heißt dein Hund?"
        },
        {
          "type": "text",
          "label": "Placeholder Text",
          "id": "placeholder_text",
          "default": "Name"
        }
      ]
    },
    {
      "type": "age-question",
      "name": "Age Question",
      "settings": [
        {
          "type": "text",
          "label": "Question Text",
          "id": "question_text",
          "default": "Wann wurde %{name} geboren?"
        },
        {
          "type": "text",
          "label": "Question Description",
          "id": "question_descr",
          "default": "Hier reicht eine Schätzung, falls du das exakte Alter von %{name} nicht kennst."
        },
        {
          "type": "text",
          "label": "Placeholder Text",
          "id": "placeholder_text",
          "default": "2016-04"
        }
      ]
    },
    {
      "type": "breed-question",
      "name": "Breed Question",
      "settings": [
        {
          "type": "text",
          "label": "Question Text",
          "id": "question_text",
          "default": "Welcher Rasse gehört %{name} zu?"
        },
        {
          "type": "text",
          "label": "Question Description",
          "id": "question_descr",
          "default": "Anweisung"
        },
        {
          "type": "text",
          "label": "Placeholder Text",
          "id": "placeholder_text",
          "default": "z.B. Eurasier"
        }
      ]
    },
    {
      "type": "weight-question",
      "name": "Weight Question",
      "settings": [
        {
          "type": "text",
          "label": "Question Text",
          "id": "question_text",
          "default": "Wieviel wiegt %{name}?"
        },
        {
          "type": "text",
          "label": "Question Description",
          "id": "question_descr",
          "default": "Du kannst das Gewicht schätzen wenn du es nicht genau weißt."
        },
        {
          "type": "text",
          "label": "Placeholder Text",
          "id": "placeholder_text",
          "default": "15"
        }
      ]
    },
    {
      "type": "allergies-question",
      "name": "Allergies Question",
      "settings": [
        {
          "type": "text",
          "label": "Question Text",
          "id": "question_text",
          "default": "Hat %{name} Allergien oder Unverträglichkeiten?"
        },
        {
          "type": "text",
          "label": "Question Description",
          "id": "question_descr",
          "default": "Erklärung"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "UR Questionaire",
      "blocks": [
        {
          "type": "name-question"
        },
        {
          "type": "age-question"
        },
        {
          "type": "breed-question"
        },
        {
          "type": "weight-question"
        }
      ]
    }
  ]
}
{% endschema %}

{% stylesheet %}
  .questionaire-slide[data-active='true'] {
    min-height: 50vh;
    height: 50;
    opacity: 1;
  }
  .questionaire-slide[data-active='false'] {
    min-height: 0vh;
    height: 0;
    opacity: 0;
  }
{% endstylesheet %}

{% javascript %}
  // You can add JavaScript functionalities here if needed
{% endjavascript %}
